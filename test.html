<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dragon Bible Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
            padding: 20px;
        }
        .book-card {
            background: #333;
            padding: 20px;
            margin: 10px;
            cursor: pointer;
            border: 2px solid #gold;
            display: inline-block;
        }
        .book-card:hover {
            background: #444;
        }
        #reader {
            background: #222;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #gold;
        }
        .hidden {
            display: none;
        }
        .test-button {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>Dragon Bible Test Page</h1>
    
    <div id="test-section">
        <h2>Test Controls</h2>
        <button class="test-button" onclick="testBasicJS()">Test Basic JS</button>
        <button class="test-button" onclick="testOpenBook()">Test openBook Function</button>
        <button class="test-button" onclick="testShowHide()">Test Show/Hide</button>
    </div>
    
    <div id="books">
        <h2>Books Section</h2>
        <div class="book-card" onclick="simpleOpenBook('genesis')">Genesis (Simple)</div>
        <div class="book-card" onclick="openBook('genesis')">Genesis (Full)</div>
    </div>
    
    <div id="reader" class="hidden">
        <h2>Reader Section</h2>
        <button onclick="closeReader()">Close Reader</button>
        <div id="readerContent">
            <p>Reader content will appear here...</p>
        </div>
    </div>
    
    <div id="output" style="background: black; padding: 10px; margin-top: 20px;">
        <h3>Console Output:</h3>
        <pre id="console-output"></pre>
    </div>

    <script>
        // Override console.log to show in page
        const output = document.getElementById('console-output');
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog(...args);
            output.textContent += args.join(' ') + '\n';
        };

        // Test functions
        function testBasicJS() {
            console.log('✓ Basic JavaScript is working!');
            alert('JavaScript works!');
        }

        function testOpenBook() {
            console.log('Testing openBook function...');
            if (typeof openBook === 'function') {
                console.log('✓ openBook function exists');
            } else {
                console.log('✗ openBook function NOT found');
            }
        }

        function testShowHide() {
            console.log('Testing show/hide functionality...');
            const reader = document.getElementById('reader');
            const books = document.getElementById('books');
            
            // Show reader
            reader.classList.remove('hidden');
            reader.style.display = 'block';
            books.style.display = 'none';
            console.log('✓ Showed reader, hid books');
            
            setTimeout(() => {
                // Hide reader
                reader.classList.add('hidden');
                reader.style.display = 'none';
                books.style.display = 'block';
                console.log('✓ Hid reader, showed books');
            }, 2000);
        }

        // Simple version without dependencies
        function simpleOpenBook(bookId) {
            console.log('Simple openBook called with:', bookId);
            const reader = document.getElementById('reader');
            const books = document.getElementById('books');
            
            if (reader && books) {
                reader.classList.remove('hidden');
                reader.style.display = 'block';
                books.style.display = 'none';
                document.getElementById('readerContent').innerHTML = '<h3>Opening ' + bookId + '</h3><p>This is a simple test.</p>';
                console.log('✓ Simple openBook worked!');
            } else {
                console.log('✗ Could not find reader or books elements');
            }
        }

        // Include the main script
        console.log('Loading main script.js...');
    </script>
    
    <!-- Include the actual script -->
    <script src="script.js"></script>
    
    <script>
        // Test after script loads
        setTimeout(() => {
            console.log('\nChecking what loaded from script.js:');
            console.log('- openBook:', typeof openBook);
            console.log('- closeReader:', typeof closeReader);
            console.log('- booksData:', typeof booksData);
            console.log('- window.openBook:', typeof window.openBook);
        }, 1000);
    </script>
</body>
</html>